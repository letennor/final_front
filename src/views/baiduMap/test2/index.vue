<template>
  <div>
    <el-button type="primary projectColor" @click="action">开始</el-button>
    <baidu-map class="map" :center="pos" :zoom="16" :scroll-wheel-zoom="true">
      <bm-marker
        :position="pos"
        :dragging="false"
        animation="BMAP_ANIMATION_BOUNCE"
      >
        <bm-label
          content="标签"
          :labelStyle="{ color: 'red', fontSize: '14px' }"
          :offset="{ width: -30, height: 20 }"
        />
      </bm-marker>
      <bm-polyline
        :path="polyLine"
        stroke-color="blue"
        :stroke-opacity="0.75"
        :stroke-weight="2"
        strokeStyle="dashed"
      ></bm-polyline>
    </baidu-map>
  </div>
</template>

<script>
import { BmlLushu } from "vue-baidu-map";
import carIcon from "@/assets/map/汽车.png";
export default {
  name: "Test2",
  components: {
    // BmlLushu,
  },
  data() {
    return {
      pos: { lng: 116.407136, lat: 39.872493 },
      play: true,
      flag: 0,
      polyLine: [],
      googlePath:
        "121.5437325699318,31.31568850708564,7.229965301731925 121.5423518472888,31.29886292212665,5.47540696151906 121.5425407862189,31.29842140077427,5.046596663699752 121.5429966792006,31.29798248981078,5.680984754642571 121.5432937068461,31.29731226948045,7.621963266680007 121.5435385753646,31.29686949501905,7.002000222381501 121.5437531055428,31.29658971891497,6.926389008332596 121.5439699282009,31.29630684563024,7.979188988675903 121.5441768287735,31.29599292190097,8.532795924069852 121.54441169865,31.29552605574872,8.389589209264102 121.5445384661431,31.29528125135719,8.137400519723037 121.5447556056502,31.29495746731043,7.82821850238461 121.544965272081,31.29457973025442,7.685706913264932 121.5452234317192,31.29431196376336,7.281256331787973 121.5454107259934,31.2939583236905,6.604853582342827 121.5456832050913,31.29361009000322,6.325877779857909 121.5459304821773,31.29333628327384,6.284668680154228 121.5462185084594,31.29305633317962,6.346648489359358 121.5464668635985,31.29278679195641,6.204452738885058 121.5468014875886,31.29245501999748,5.743832258247952 121.5469856812853,31.29221567651162,6.112054598201613 121.5473663114809,31.29198434300031,7.220461412276284 121.5476265922217,31.29181719363368,7.443600390322517 121.5477553842437,31.29164092164814,7.659538956558858 121.548008115497,31.29147995955497,7.938768374379348 121.5485140745393,31.29109988676773,8.137464761736107 121.5487131841675,31.29097023622147,7.626891907358708 121.5488572461878,31.29084102835147,7.085116414967239 121.5490172753301,31.29070202575467,6.5800399251345 121.5492120112805,31.2905654514973,6.12307660061024 121.5494528880747,31.29040153500267,6.015198899000087 121.5496428412317,31.29027232577584,5.976175814441687 121.549858882772,31.29009229607197,5.587760075924731 121.5500935052916,31.28992543195629,6.517015535308028 121.5502076708397,31.28984995340708,7.729202461076938 121.5506468880671,31.28960634529704,11.91573972056794 121.5508427434271,31.28946928509431,11.5846964172287 121.5509826656941,31.28935207623502,11.15113346665004 121.5511705489426,31.28921099878448,10.71549155585831 121.5513665032491,31.28906830270734,10.03466509477266 121.5515286321273,31.2889048959207,10.16016517899526 121.5516743875008,31.28878265376974,10.22753606753799 121.5517586434217,31.28864359395171,10.59033911157709 121.5520346463121,31.28837413762351,10.95611361750384 121.552138388003,31.28818749666642,10.78507972186128 121.5522085111643,31.28809060842746,10.6408769120934 121.5522776421798,31.28794065646509,10.68844370906814 121.5523531555568,31.28781667881643,10.73872770044205 121.5524038232544,31.28759331173576,10.66441430746823 121.5524516464569,31.28740921474826,9.99969406401288 121.552540396993,31.28724002275632,9.460381866340672 121.5525641206499,31.28711255967443,8.974898092726884 121.5526463573605,31.28695156932942,8.446904129081878 121.5528279559816,31.28636765497589,8.360878184400931 121.5529140276747,31.28608627677411,8.351767166854556 121.5529513669857,31.28588447875414,8.088596550479343 121.5530290159196,31.28563723022307,7.697856599815065 121.5530321080513,31.28546016499735,7.176892408846189 121.5531196148505,31.28525798329903,6.343171575013605 121.5531736342809,31.28507165923923,5.328694965837871 121.5533996137424,31.28440340180948,3.270390116071786 121.5534453366294,31.28416965555025,3.142589151497908 121.5534853804861,31.28401971855721,3.23412461695362 121.5535772484843,31.28381063797698,3.528528270722338 121.5537297593696,31.28330480790709,4.765248174725492 121.5537305305167,31.28305430923917,5.819260695479835 121.553852087768,31.28259210327916,7.828710514268284 121.5539727338438,31.28241862183046,8.462363154972435 121.5541073114341,31.28191262097767,8.755478678007593 121.5542203754987,31.28166983260596,7.816999719554465 121.5542863208859,31.28156448746562,7.179489305789495 121.5542681533982,31.28143989589372,7.004159923651923 121.5543296387124,31.28123691930902,6.571141916856069 121.5545161043784,31.28095805866655,5.818521789255129 121.5545324122745,31.28071991456469,6.012011268934623 121.5546133545316,31.280433539288,6.736173818664806 121.5547357178739,31.28023925487045,7.457111407172938 121.5550223750595,31.27982123525846,8.14325541558709 121.5550502589452,31.27963982527324,8.693320927253668 121.5551113972827,31.27942902463906,9.08490481754229 121.5551984641544,31.27925732980511,8.581451011472151 121.5552314745516,31.2790460397651,8.036519694555157 121.5552966965108,31.27882521917113,7.312778517655523 121.5553887395458,31.27855560479729,5.941648755520617 121.5554645740326,31.2783131519078,4.520318114019862 121.5555046486401,31.27807473756546,3.156031204238905 121.5555685215969,31.27787290787963,2.698261837106246 121.5557292351079,31.27725558323036,1.772043148268556 121.5557174878264,31.2769869707367,1.124467373927909 121.5556656723164,31.27678293513355,0.8803228533314389 121.55565432907,31.27656951307387,0.9598720962741036 121.5555930542817,31.27643355536279,1.262926913492914 121.5554790176639,31.27628024978707,1.798118305454341 121.5553239843922,31.27607932775844,2.947950562826913 121.5551641786269,31.27591472710401,3.810344576848714 121.554969060044,31.27575468307828,4.70222157663287 121.5548102246274,31.27559859775889,5.236138231751775 121.5546761202522,31.2754728061458,5.959958923208588 121.5545379023053,31.27523959745788,6.486606407532194 121.5543816941281,31.2750854533604,7.377327223668209 121.5542435290151,31.27498300583553,8.404207768492132 121.5541089341191,31.27476116269794,9.059582174084156 121.5538589183952,31.27462455532353,8.710684638577158 121.5536962354424,31.27446111228709,8.332561893124318 121.5534136315887,31.27423711081714,7.519221895938522 121.5531622880475,31.27405331649344,6.954327157019069 121.5528952443336,31.27387008854958,6.011772269746302 121.5527679322644,31.27369429463743,5.56667342450857 121.552500401604,31.27348374089658,5.968586647349367 121.5523657455982,31.2734050360436,6.347777849859217 121.5521276186177,31.27321971260924,6.972882341809647 121.5519778682592,31.27308966866963,7.462244577717083 121.5517562210976,31.27292717867118,8.259904213123905 121.5516163205444,31.27283561824349,8.341183684229714 121.5514157574457,31.27272853621081,8.443021879774468 121.5513527408299,31.27261343527086,8.247476652847464 121.5512406354512,31.27250262156029,7.945763513633388 121.5508997746341,31.27230947003419,7.405890983633103 121.5506325357876,31.27208995902585,6.796907072238159 121.5503527301081,31.27193073709511,7.102365675576703 121.5502157713748,31.27182793168285,7.400071531784674 121.5499659929366,31.27167462604126,7.783929592872447 121.5498180116454,31.27156551730373,7.111122333601811 121.5496883046775,31.27143987673074,6.440637245140859 121.5495034280251,31.27132978730197,5.775452757935247 121.5492579735316,31.27123882248858,5.25708336740075 121.5491678737504,31.27112145817425,5.597444781494712 121.5489319747518,31.27097291413427,6.666669087209723 121.548826819542,31.27091298455804,6.970576600726464 121.5486538985444,31.27079657742737,7.406549949491463 121.548447555597,31.27056023104632,7.261864676716594 121.5480954604342,31.27036496986443,7.403628686402235 121.547801589462,31.27025552872073,7.492729749917575 121.5473407947472,31.27002166820655,6.807904537570315 121.5471802572852,31.26985577962204,6.163966716905154 121.546950549751,31.26976477796628,6.405985489207414 121.5466655614101,31.26950488028521,6.74886707820344 121.5464599747193,31.26932621369061,7.242167280760105 121.5462652397588,31.26920582798004,7.78607535419755 121.5461362262087,31.26907682897342,8.176899708443873 121.5459721084852,31.26893132986762,7.968693303374613 121.5458541063011,31.26881295175485,7.572186043387221 121.5453358643552,31.26847065110632,6.713499662962419 121.5450185115535,31.26826106399696,7.750871731192044 121.5446912320512,31.26810432374018,8.504287822031545 121.5445069048304,31.26794065661264,9.378027949971184 121.5441443131632,31.26776157386617,9.694492611216257 121.5439796659835,31.26752535332568,9.79817047778285 121.5438525258135,31.26746531575607,9.700865162295502 121.5436545449629,31.26731343662171,9.562790923441533 121.5436042650521,31.267221636828,9.640869442737909 121.5434100330381,31.26707350455952,9.5895715332467 121.5432576854118,31.26698170856302,9.45380165336443 121.5431433032294,31.26688333556665,9.468070326189428 121.5430323312512,31.26671599424232,9.58996236806227 121.5429299096816,31.26658261705331,9.615500511984179 121.5425954465493,31.26627328829086,9.205112089563624 121.5423992443089,31.26617428636674,8.755509100021401 121.5421227761622,31.26594707780752,9.007961680904003 121.5419183953316,31.26573831241356,9.56456984380255 121.5417176951786,31.2655507613807,9.800127824917064 121.5414950260497,31.26536022166501,9.342610495787014 121.541255474676,31.26517730382715,8.708286576124845 121.541133714321,31.26502874869531,8.140694904815239 121.5409391094866,31.26484342705645,8.626533711322931 121.5407895441573,31.26464759569514,9.279376199016536 121.5405682117655,31.2644707614912,9.804012866740413 121.5403827014844,31.26430413608617,9.991859493618943 121.5401474911048,31.26409478846283,9.407062578484791 121.5400036297141,31.26396981423134,9.064506815551834 121.5397331257146,31.26373352164482,8.374239754965245 121.5396595769166,31.26365237917332,8.02684637124619 121.5393928597131,31.26344255603911,6.93918956046436 121.539107669837,31.2632242931634,5.716318007539418 121.5389340109891,31.262901348768,4.958841230716773 121.5388543822126,31.26273440106837,4.710120304160974 121.5385811845875,31.26258162879556,3.982791212529002 121.5383451639898,31.26239144683471,3.463270422687248 121.5381765449725,31.26220248860617,3.736363012291122 121.5378398135731,31.26200046276564,4.666408508950839 121.5373651266732,31.26161837379393,6.689964020336953 121.5373936454063,31.26174422053094,6.497110675505318 121.5370517269596,31.26222967012287,7.140422041761612 121.5368002827253,31.26258203441314,6.953917729479597 121.5364431069281,31.26288980234468,7.549821521682336 121.5360908337415,31.26313416370541,8.180348058209166 121.5358957166608,31.26341326494008,8.208978323624567 121.535634732904,31.26375102910686,7.713139932033131 121.535396721542,31.26392544389349,7.16217432910333 121.5352423658224,31.26381773951505,7.031110738293793 121.5350665045421,31.26358654554003,6.612795310938298 121.5348031333709,31.26342861856769,6.550554032269686 121.5346386725803,31.26345473473572,7.252045938869456 121.5345168618479,31.26375885380604,7.597782221845026 121.5343272635265,31.26386124804457,8.201804000760438 121.5341039153485,31.26424053953845,8.137350619415431 121.5340312259883,31.26435630842023,8.13741182417839 121.5339277794881,31.26447726421043,8.276134044145904 121.5337286203825,31.26467393374506,9.541860016326149 121.5336451725429,31.26493753876123,10.73288604002841 121.5335348333868,31.26504824996386,11.83415784573259 121.5334547594736,31.26523216475681,13.0793746401194 121.5331825669357,31.26549580357887,14.89311940359014 121.5329438036429,31.26581332702764,14.32572098739825 121.5326893708727,31.26615443044869,11.54185230227233 121.5324652419593,31.266440298134,9.548770170577654 121.5322208154634,31.26673149960395,8.195019502652922 121.5318709862712,31.26724586353781,7.519137925238888 121.5316551125678,31.26754972460659,7.902864779102357 121.5314510770195,31.26781216869315,8.137496980353379 121.5316743694433,31.26819471866749,9.64316606216822 121.5320426711307,31.26851929987686,10.75257552244176 121.5322908734513,31.2687016555686,10.91890837311319 121.532865617702,31.26916304023526,9.112931352046047 121.5330709248412,31.26929266266877,9.611581133814903 121.5332217648129,31.26944972289659,10.04655217306736 121.5336153093971,31.26966831692583,11.09819111610387 121.533757269451,31.26977198589571,11.57988637784242 121.5340102677371,31.26995479186081,12.15534885435004 121.5342653635955,31.27017831178155,12.15533509265042 121.5344777657073,31.27032012931579,12.25324793455107 121.5348129496992,31.27052989736616,12.90137879287423 121.5352223444321,31.27079623896946,11.40448517117636 121.5353889986666,31.27088777040354,10.74677541873947 121.5356134479444,31.27110008772082,10.25813225993014 121.5358689812557,31.27132993797278,9.726807731560145 121.5362681226911,31.27153336178785,9.11193392731442 121.5364780726079,31.27170364685593,9.381912880037309 121.5365487497536,31.27175283651039,9.555209113935534 121.5365889206655,31.27175013139897,9.658734034375884 121.5368531010245,31.27198610359521,9.743731000592676 121.5371161844791,31.2721966992156,9.302483754890154 121.537489547297,31.27243000069976,8.624202182614093 121.5377335721676,31.27259174432281,7.932301354494705 121.5376839493654,31.27276676093805,8.036706780391201 121.5374184534217,31.2730333402329,8.729725974363095 121.5371593302789,31.27320074744616,9.815694102375947 121.5371088222179,31.27332780938108,10.24027071261552 121.5368729416967,31.27357233459868,10.91900293104144 121.5366451534792,31.27379629399132,10.91894358654113 121.5363551935311,31.27411314076456,10.91902467701662 121.5361400474964,31.27441882120669,10.76287813087104 121.5363688263959,31.27453452179093,10.91904083088668 121.5367312591927,31.27477345849378,11.18714346046238 121.5368843988704,31.27484017916456,11.34513592613177 121.5373228273779,31.275117207264,12.15529876730885 121.5374907705154,31.27525705995712,12.65472232072684 121.5378559889976,31.27551675960935,12.81858571022664 121.5380878766518,31.27564831985651,12.63916278548222 121.5383178731675,31.2757800059197,12.58914157495086 121.5386909423267,31.27598844180944,12.46441461446844 121.5388040991389,31.27608854246231,12.32692038853106 121.5389443740021,31.27615867495385,12.20208715258771 121.5392203785358,31.27634873495273,11.33605110080049 121.5394060317878,31.27648475330294,10.72507917410871 121.5396961000039,31.27668620108418,9.930716236744219 121.5399457274298,31.2768887918156,8.261027169510465 121.5402542185923,31.27710800090361,6.27409034402026 121.5405025908544,31.27734018075499,5.166791816428256 121.5408011879518,31.27755899960059,5.46355940001273 121.5410321661677,31.27775823149175,6.068236425675861 121.5412568960347,31.27794843854853,6.907954303487518 121.5415368287108,31.2781687529984,7.980897200666021 121.5420580211238,31.27857201751867,8.03502689673526 121.5423277868566,31.27874241894903,8.063517345376203 121.5425218723906,31.27892466269651,8.607086788767923 121.5428293700037,31.27911851114956,9.171394339674103 121.5429819531895,31.27940052193042,9.795840940898957 121.5432335601506,31.27951880556706,9.703137603970035 121.5435583547851,31.27969953135768,9.289270174938745 121.5439290385447,31.27995499887988,9.064565125944169 121.5441526649451,31.28016777189749,9.140059726281645 121.5445257147511,31.27986295593018,8.303931288193301 121.5448280881816,31.27949714960344,6.764195713121817 121.5451640315986,31.27920103188764,5.7705711486572 121.5454405947445,31.27895035982992,5.893623889735871 121.5455348141219,31.27881591721624,6.058174631428797 121.5459354198411,31.27883700839722,7.256405954551168 121.5461380741014,31.27914170240629,7.399655983061582 121.5463972472836,31.27931165060972,7.790661518401532 121.5467012462882,31.27949984850938,8.138564707451817 121.5469376015875,31.27972386574414,8.184488586947918 121.5473023607924,31.2799925842216,8.137378213547091 121.5474990075302,31.28013648385433,8.138347287310166 121.5477266232689,31.28026210942597,8.482110214990247 121.5480294182412,31.28040013361723,8.80026280641135",
      path: [],
    };
  },
  methods: {
    action() {
      console.log("百度地图坐标:", this.transferGooglePos(this.googlePath));
      this.path = this.transferGooglePos(this.googlePath);
      setInterval(() => {
        this.pos = this.path[this.flag];
        if (this.path[this.flag] !== undefined) {
          this.polyLine.push(this.path[this.flag]);
        }
        this.flag++;
      }, 100);
    },

    transferGooglePos(posList) {
      let baiduPosList = posList.split(" ");
      baiduPosList = baiduPosList.map((pos) => {
        //找到第二个逗号的位置
        return pos.substr(0, pos.indexOf(",", 20));
      });
      //每一个字符串拿出来，拼成一个对象
      baiduPosList = baiduPosList.map((pos) => {
        let tempArr = pos.split(",");
        //组成经纬度对象，然后return
        let tempObj = {
          lng: tempArr[0],
          lat: tempArr[1],
        };
        return tempObj;
      });
      console.log('baiduPosList:', baiduPosList)
      return baiduPosList;
    },
  },
  mounted() {},
};
</script>

<style scoped>
.map {
  width: 100%;
  height: 800px;
}
</style>